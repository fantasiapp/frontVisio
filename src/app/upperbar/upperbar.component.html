<div class="container-bar aligned">
  <div class="button-container">
    <div (click)="showFilters()" class="open-filters">
      Options
        <div class="arrow-box">
          <mat-icon class="expand-icon">expand_more</mat-icon></div></div
      >
  </div>

  <div class="ens-org">
    <span
      ><div id="ens" [ngClass]="{ light: sldValue == 1 }">Enseigne</div></span
    >
    <input
      type="range"
      min="0"
      max="1"
      step="1"
      class="input-range"
      [value]="sldValue"
      (click)="toggle();"
      [logged]="'navigation.view'"
    />
    <span
      ><div id="org" [ngClass]="{ light: sldValue == 0 }">
        Org. commercial
      </div></span
    >
  </div>

  <div class="right-block">
    <div class="search-div">
      <span
      [@openClose]="shouldShowButtons ? 'open' : 'closed'"
        ><app-search-field
          *ngIf="shouldShowButtons === true"
          class="search-bar"
          [noLense]="true"
          [searchModel]="searchModel"
          (searchModelChange)="updateSearchData($event)"
          (onCrossClick)="!$event.length && toggleSearch()"
        ></app-search-field
      ></span>
      <button class="button search" (click)="toggleSearch()" [logged]="'navigation.toggle_search'">
        <img
          class="button-img"
          src="assets/Rechercher.svg"
          alt="Chercher"
        />
      </button>
    </div>
    <div class="search-div">
      <button class="button" (click)="updateData()">
        <img class="button-img updatable" (click)="updating = true" (animationend)="onAnimationEnd()" [class.updating]="updating" src="assets/Mise a jour.svg" alt="Mettre Ã  jour" />
      </button>
    </div>
    <div class="search-div">
      <button class="button" (click)="toggleMap()" [logged]="'navigation.toggle_map'">
        <img class="button-img" [src]="mapComponent?.shown ? 'assets/icon retourne en mode dashboard.svg' : 'assets/map.svg'" alt="Carte" />
      </button>
    </div>
    <div class="search-div">
      <account-info [name]="(getName() | async) || '...'"></account-info>
    </div>
  </div>
</div>
<app-sub-upper-bar></app-sub-upper-bar>
<ng-content></ng-content>
<!-- <div> 
  <app-data-stat></app-data-stat>
</div> -->
<div *ngIf="isFilterVisible">
  <app-filters></app-filters>
</div>
<div [hidden]="!isFilterVisible" class="click-area" (click)="showFilters()"></div>

<app-map #map></app-map>